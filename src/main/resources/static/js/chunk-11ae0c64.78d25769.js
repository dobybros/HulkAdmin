(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-11ae0c64"],{4598:function(e,t,i){},4847:function(e,t,i){"use strict";var a=i("4598");i.n(a).a},"587b":function(e,t,i){"use strict";i.d(t,"d",function(){return r}),i.d(t,"n",function(){return s}),i.d(t,"k",function(){return o}),i.d(t,"c",function(){return n}),i.d(t,"a",function(){return l}),i.d(t,"l",function(){return c}),i.d(t,"f",function(){return u}),i.d(t,"o",function(){return v}),i.d(t,"m",function(){return d}),i.d(t,"e",function(){return p}),i.d(t,"j",function(){return m}),i.d(t,"g",function(){return h}),i.d(t,"h",function(){return f}),i.d(t,"b",function(){return y}),i.d(t,"i",function(){return D});var a=i("9bd2");i("c276");function r(){return Object(a.a)({url:"/deploy/serverconfig",method:"get"})}function s(e){return Object(a.a)({url:"/deploy/serverconfig",method:"post",data:e})}function o(e){return Object(a.a)({url:"/deploy/serverconfig/"+e,method:"delete"})}function n(){return Object(a.a)({url:"/deploy/groovyzips",method:"get"})}function l(e,t){return Object(a.a)({url:"/deploy/groovyzip?s="+e+"&v="+t,method:"delete"})}function c(e){return Object(a.a)({url:"/deploy/groovyzips?s="+e,method:"delete"})}function u(){return Object(a.a)({url:"/deploy/serviceversions",method:"get"})}function v(e){return Object(a.a)({url:"/deploy/serviceversion",method:"post",data:e})}function d(e){return Object(a.a)({url:"/deploy/serviceversion?i="+e,method:"delete"})}function p(){return Object(a.a)({url:"/deploy/serverweb",method:"get"})}function m(e){return Object(a.a)({url:"/deploy/serverweb",method:"post",data:e})}function h(e){return Object(a.a)({url:"/deploy/serverweb/server/"+e,method:"get"})}function f(e){return Object(a.a)({url:"/deploy/serverweb/web/"+e,method:"get"})}function y(){return Object(a.a)({url:"/deploy/containers",method:"get"})}function D(e){return Object(a.a)({url:"/deploy/container",method:"post",data:e})}},dd7d:function(e,t,i){"use strict";i.r(t);i("28a5");var a=i("587b"),r=(i("c276"),{data:function(){return{uploadUrl:"/open/groovyzip",tableData:[],serviceName:"",value:"",dialogVisible:!1,deleteGroovyDialogVisible:!1,everyData:{},fileList:[],param:{},deleteServiceName:""}},created:function(){var t=this;Object(a.c)().then(function(e){t.$message.success("Updated!"),t.tableData=e}).catch(function(e){t.$message.error(e)})},methods:{openUploadDialog:function(e){this.dialogVisible=!0,this.value="",void 0!==e?(this.everyData=e,this.serviceName=e.serviceName):(this.everyData={},this.serviceName="")},submitUpload:function(){if(null!==this.value&&null!==this.serviceName&&""!==this.value&&""!==this.serviceName)if(0<this.$refs.upload.uploadFiles.length){this.$refs.upload.submit();var e="";if(e=void 0!==this.value.split(":")[1]?this.value.split(":")[1].trim():this.value,void 0!==this.everyData.maxVersion){if(e>this.everyData.maxVersion.trim()){var t=this.everyData.version,i=this.everyData.date;this.everyData.allVersion.unshift({serviceName:this.serviceName,version:t,date:i}),this.everyData.versions.unshift({value:"version: "+e}),this.everyData.maxVersion=e,this.everyData.version=e,this.everyData.date=this.timeFormat((new Date).getTime())}else if(e===this.everyData.maxVersion.trim())this.everyData.date=this.timeFormat((new Date).getTime());else if(e<this.everyData.maxVersion.trim()){for(var a=!1,r=0;r<this.everyData.allVersion.length;r++){var s=this.everyData.allVersion[r];s.version===e&&(a=!0,s.date=this.timeFormat((new Date).getTime()))}if(!a)for(var o=0;o<this.everyData.allVersion.length;o++){if(e>this.everyData.allVersion[o].version){a=!0,this.everyData.versions.splice(o+1,0,{value:"version: "+e}),this.everyData.allVersion.splice(o,0,{version:e,serviceName:this.serviceName,date:this.timeFormat((new Date).getTime())});break}}a||(this.everyData.versions.push({value:"version: "+e}),this.everyData.allVersion.push({version:e,serviceName:this.serviceName,date:this.timeFormat((new Date).getTime())}))}}else this.tableData.push({maxVersion:e,version:e,serviceName:this.serviceName,date:this.timeFormat((new Date).getTime()),versions:[{value:"version: "+e}],allVersion:[]});this.dialogVisible=!1,this.$refs.upload.uploadFiles=[]}else this.$message.error("Please select a file to upload!");else this.$message.error("Please make sure that neither service name nor version is empty!")},selectVersion:function(t,e){e(t?this.everyData.versions.filter(function(e){return-1!==e.value.indexOf(t)}):this.everyData.versions)},cancelEdit:function(){this.dialogVisible=!1,this.$refs.upload.uploadFiles=[]},deleteServiceVersion:function(){var o=this;this.dialogVisible=!1,Object(a.a)(this.serviceName,this.value).then(function(e){o.$message.success("Success!");if((void 0!==o.value.split(":")[1]?o.value.split(":")[1].trim():o.value.trim())===o.everyData.maxVersion.trim()){var t=o.everyData.allVersion[0];void 0!==t&&(o.everyData.maxVersion=t.version,o.everyData.version=t.version,o.everyData.date=t.date),o.everyData.allVersion.splice(0,1),o.everyData.versions.splice(0,1)}else{for(var i=0;i<o.everyData.allVersion.length;i++){var a="";a=void 0!==o.value.split(":")[1]?o.value.split(":")[1].trim():o.value,o.everyData.allVersion[i].version===a&&o.everyData.allVersion.splice(i,1)}for(var r=0;r<o.everyData.versions.length;r++){var s="";s=void 0!==o.value.split(":")[1]?o.value:"version: "+o.value,o.everyData.versions[r].value===s&&o.everyData.versions.splice(r,1)}}o.dialogVisible=!1}).catch(function(e){o.$message.error(e)})},newServiceVersion:function(){this.openUploadDialog()},timeFormat:function(e){return new Date(e).getFullYear()+"-"+(new Date(e).getMonth()+1<10?"0"+(new Date(e).getMonth()+1):new Date(e).getMonth()+1)+"-"+(new Date(e).getDate()<10?"0"+new Date(e).getDate():new Date(e).getDate())+" "+(new Date(e).getHours()<10?"0"+new Date(e).getHours():new Date(e).getHours())+":"+(new Date(e).getMinutes()<10?"0"+new Date(e).getMinutes():new Date(e).getMinutes())+":"+(new Date(e).getSeconds()<10?"0"+new Date(e).getSeconds():new Date(e).getSeconds())},openDeleteDialog:function(e,t){this.deleteGroovyDialogVisible=!0,this.deleteServiceName=t.serviceName},cancelDelete:function(){this.deleteGroovyDialogVisible=!1,this.deleteServiceName=""},removeService:function(e){var t=this;Object(a.l)(e).then(function(e){t.$message.success("Success!")}).catch(function(e){t.$message.error(e)})},sureDelete:function(){this.deleteGroovyDialogVisible=!1;for(var e=0;e<this.tableData.length;e++)this.tableData[e].serviceName===this.deleteServiceName&&this.tableData.splice(e,1);this.removeService(this.deleteServiceName),this.deleteServiceName=""}},computed:{uploadUrlData:function(){return location.protocol+"//"+location.host+this.uploadUrl+"?s="+this.serviceName+"&v="+this.value}}}),s=(i("4847"),i("2877")),o=function(e){e.options.__source="src/views/hulk/deployuploadgroovy/index.vue"},n=Object(s.a)(r,function(){var i=this,e=i.$createElement,a=i._self._c||e;return a("el-container",[a("el-main",[a("el-button",{attrs:{type:"primary",round:""},on:{click:i.newServiceVersion}},[i._v(i._s(i.$t("views.deploy.addNewService")))]),a("div",[a("el-table",{staticStyle:{width:"90%"},attrs:{data:i.tableData,"row-key":"serviceName",height:"550",border:"","tree-props":{children:"allVersion"}}},[a("el-table-column",{attrs:{prop:"serviceName",label:"service"}}),a("el-table-column",{attrs:{prop:"version",label:"version"}}),a("el-table-column",{attrs:{prop:"date",label:"Upload time"}}),a("el-table-column",{attrs:{label:"Operations"},scopedSlots:i._u([{key:"default",fn:function(t){return t.row.version===t.row.maxVersion?[a("el-button",{attrs:{type:"primary",size:"medium"},nativeOn:{click:function(e){return e.preventDefault(),i.openUploadDialog(t.row)}}},[i._v("\n                              "+i._s(i.$t("views.deploy.edit"))+"\n                          ")]),a("el-button",{attrs:{type:"danger",size:"medium"},nativeOn:{click:function(e){return e.preventDefault(),i.openDeleteDialog(t.$index,t.row)}}},[i._v("\n                              "+i._s(i.$t("views.deploy.delete"))+"\n                          ")])]:void 0}}],null,!0)})],1)],1)],1),a("el-dialog",{attrs:{visible:i.dialogVisible,width:"50%"},on:{"update:visible":function(e){i.dialogVisible=e}}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-input",{attrs:{placeholder:"Input service name"},model:{value:i.serviceName,callback:function(e){i.serviceName=e},expression:"serviceName"}},[a("template",{slot:"prepend"},[i._v(i._s(i.$t("views.deploy.serviceName")))])],2)],1),a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{disabled:!0,placeholder:"version"}})],1),a("el-col",{attrs:{span:5}},[a("el-autocomplete",{attrs:{placeholder:"Select version","fetch-suggestions":i.selectVersion,clearable:""},model:{value:i.value,callback:function(e){i.value=e},expression:"value"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"uploader"},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{accept:".zip",action:i.uploadUrlData,"file-list":i.fileList,limit:1,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"medium",type:"primary"},slot:"trigger"},[i._v(i._s(i.$t("views.deploy.selectFile")))]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"medium",type:"success"},on:{click:i.submitUpload}},[i._v(i._s(i.$t("views.deploy.upload")))])],1)],1),a("span",{staticClass:"cancel-delete"},[a("el-button",{attrs:{size:"medium"},on:{click:i.cancelEdit}},[i._v(i._s(i.$t("views.deploy.cancel")))]),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:i.deleteServiceVersion}},[i._v(i._s(i.$t("views.deploy.delete")))])],1)])],1),a("el-dialog",{attrs:{title:i.$t("views.deploy.reminder"),visible:i.deleteGroovyDialogVisible,width:"30%"},on:{"update:visible":function(e){i.deleteGroovyDialogVisible=e}}},[a("span",[i._v(i._s(i.$t("views.deploy.confrimDeleteService"))),a("span",{staticStyle:{color:"#000fff"}},[i._v(i._s(this.deleteServiceName))]),i._v("?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:i.cancelDelete}},[i._v(i._s(i.$t("views.deploy.cancel")))]),a("el-button",{attrs:{type:"primary"},on:{click:i.sureDelete}},[i._v(i._s(i.$t("views.deploy.sure")))])],1)])],1)},[],!1,null,"6828c40c",null);"function"==typeof o&&o(n);t.default=n.exports}}]);